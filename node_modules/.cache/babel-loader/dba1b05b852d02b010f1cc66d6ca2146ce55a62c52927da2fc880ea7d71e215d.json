{"ast":null,"code":"var _jsxFileName = \"/Users/thiagodonato/Documents/App_Projects/Edit_Text/src/components/SuggestionOverlay.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getLevelClassName } from '../utils';\nimport Tooltip from './Tooltip';\nimport DiffHighlight from './DiffHighlight';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SuggestionOverlay = ({\n  spans,\n  onAccept,\n  onReject,\n  focusLevel\n}) => {\n  _s();\n  const [activeSuggestionId, setActiveSuggestionId] = useState(null);\n  const handleSuggestionClick = id => {\n    setActiveSuggestionId(prevId => prevId === id ? null : id);\n  };\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (!activeSuggestionId) return;\n      if (event.key === 'a' || event.key === 'Enter') {\n        onAccept(activeSuggestionId);\n        setActiveSuggestionId(null);\n      } else if (event.key === 'r' || event.key === 'Backspace') {\n        onReject(activeSuggestionId);\n        setActiveSuggestionId(null);\n      } else if (event.key === 'Escape') {\n        setActiveSuggestionId(null);\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [activeSuggestionId, onAccept, onReject]);\n  if (spans.length === 0) {\n    return null;\n  }\n  const getHighlightClassName = (suggestion, isActive) => {\n    let className = '';\n    if (suggestion.status === 'accepted') {\n      className = 'highlight-accepted';\n    } else {\n      className = getLevelClassName(suggestion.level);\n    }\n\n    // Add opacity if another suggestion is active\n    if (activeSuggestionId !== null && !isActive) {\n      className += ' opacity-50';\n    }\n\n    // Add transition for smooth opacity change\n    className += ' transition-opacity duration-200';\n    return className;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full p-4 border border-gray-300 rounded-lg bg-white font-mono text-sm leading-relaxed whitespace-pre-wrap\",\n    children: spans.map((span, index) => {\n      if (span.isHighlighted && span.suggestion && span.suggestion.status !== 'rejected') {\n        if (span.suggestion.level > focusLevel) {\n          return /*#__PURE__*/_jsxDEV(\"span\", {\n            children: span.text\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 20\n          }, this);\n        }\n        const suggestionId = span.suggestion.id;\n        const isActive = activeSuggestionId === suggestionId;\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"relative inline\",\n          onClick: () => handleSuggestionClick(suggestionId),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: getHighlightClassName(span.suggestion, isActive),\n            children: span.suggestion.status === 'pending' && span.suggestion.replacement ? /*#__PURE__*/_jsxDEV(DiffHighlight, {\n              original: span.suggestion.original,\n              replacement: span.suggestion.replacement\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 19\n            }, this) : span.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this), isActive && /*#__PURE__*/_jsxDEV(Tooltip, {\n            suggestion: span.suggestion,\n            onAccept: onAccept,\n            onReject: onReject\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this);\n      }\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        children: span.text\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 16\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n};\n_s(SuggestionOverlay, \"VFjwka9tXlYi1rhpMOwqGf7xT38=\");\n_c = SuggestionOverlay;\nexport default SuggestionOverlay;\nvar _c;\n$RefreshReg$(_c, \"SuggestionOverlay\");","map":{"version":3,"names":["React","useState","useEffect","getLevelClassName","Tooltip","DiffHighlight","jsxDEV","_jsxDEV","SuggestionOverlay","spans","onAccept","onReject","focusLevel","_s","activeSuggestionId","setActiveSuggestionId","handleSuggestionClick","id","prevId","handleKeyDown","event","key","window","addEventListener","removeEventListener","length","getHighlightClassName","suggestion","isActive","className","status","level","children","map","span","index","isHighlighted","text","fileName","_jsxFileName","lineNumber","columnNumber","suggestionId","onClick","replacement","original","_c","$RefreshReg$"],"sources":["/Users/thiagodonato/Documents/App_Projects/Edit_Text/src/components/SuggestionOverlay.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { HighlightSpan, Suggestion } from '../types';\nimport { getLevelClassName } from '../utils';\nimport Tooltip from './Tooltip';\nimport DiffHighlight from './DiffHighlight';\n\ntype FocusLevel = 1 | 2 | 3;\n\ninterface SuggestionOverlayProps {\n  spans: HighlightSpan[];\n  onAccept: (id: string) => void;\n  onReject: (id: string) => void;\n  focusLevel: FocusLevel;\n}\n\nconst SuggestionOverlay: React.FC<SuggestionOverlayProps> = ({ spans, onAccept, onReject, focusLevel }) => {\n  const [activeSuggestionId, setActiveSuggestionId] = useState<string | null>(null);\n\n  const handleSuggestionClick = (id: string) => {\n    setActiveSuggestionId(prevId => (prevId === id ? null : id));\n  };\n\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (!activeSuggestionId) return;\n\n      if (event.key === 'a' || event.key === 'Enter') {\n        onAccept(activeSuggestionId);\n        setActiveSuggestionId(null);\n      } else if (event.key === 'r' || event.key === 'Backspace') {\n        onReject(activeSuggestionId);\n        setActiveSuggestionId(null);\n      } else if (event.key === 'Escape') {\n        setActiveSuggestionId(null);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [activeSuggestionId, onAccept, onReject]);\n\n  if (spans.length === 0) {\n    return null;\n  }\n\n  const getHighlightClassName = (suggestion: Suggestion, isActive: boolean): string => {\n    let className = '';\n    if (suggestion.status === 'accepted') {\n      className = 'highlight-accepted';\n    } else {\n      className = getLevelClassName(suggestion.level);\n    }\n    \n    // Add opacity if another suggestion is active\n    if (activeSuggestionId !== null && !isActive) {\n      className += ' opacity-50';\n    }\n    \n    // Add transition for smooth opacity change\n    className += ' transition-opacity duration-200';\n    \n    return className;\n  };\n\n  return (\n    <div className=\"w-full p-4 border border-gray-300 rounded-lg bg-white font-mono text-sm leading-relaxed whitespace-pre-wrap\">\n      {spans.map((span, index) => {\n        if (span.isHighlighted && span.suggestion && span.suggestion.status !== 'rejected') {\n          if (span.suggestion.level > focusLevel) {\n            return <span key={index}>{span.text}</span>;\n          }\n\n          const suggestionId = span.suggestion.id;\n          const isActive = activeSuggestionId === suggestionId;\n\n          return (\n            <span\n              key={index}\n              className=\"relative inline\"\n              onClick={() => handleSuggestionClick(suggestionId)}\n            >\n              <span className={getHighlightClassName(span.suggestion, isActive)}>\n                {span.suggestion.status === 'pending' && span.suggestion.replacement ? (\n                  <DiffHighlight original={span.suggestion.original} replacement={span.suggestion.replacement} />\n                ) : (\n                  span.text\n                )}\n              </span>\n              {isActive && (\n                <Tooltip\n                  suggestion={span.suggestion}\n                  onAccept={onAccept}\n                  onReject={onReject}\n                />\n              )}\n            </span>\n          );\n        }\n        return <span key={index}>{span.text}</span>;\n      })}\n    </div>\n  );\n};\n\nexport default SuggestionOverlay; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}